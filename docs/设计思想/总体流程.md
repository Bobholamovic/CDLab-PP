# 总体流程

以下描述 `src/train.py` 的 `cmd` 参数为 `train` 时程序的行为，以便展示项目各组成部分之间的关系。仅介绍关键部分：

首先利用[配置系统](./配置系统.md)，从默认配置项、配置文件以及命令行参数确定各配置项的最终取值。然后，将配置项字典传入[训练器选择器](./训练器.md)，后者将返回一个可用且具有最高优先级的训练器类，如果无可用训练器类则程序报错退出。利用配置项字典，构造训练器对象。在训练器的构造过程中，将创建 [`Logger` 和 `OutPathGetter`](./其它.md) 对象，并依次调用模型、损失、[数据集](./数据集接口.md)以及优化器的[工厂函数](./工厂与建造器.md)，而这些工厂函数将借助部分配置项匹配合适的建造器，通过调用建造器构造相应的目标对象并返回。特别地，在优化器对象构造完毕之前，根据配置项的不同，可能会首先构造相应的学习率调度器，并将其作为参数传递到优化器的工厂函数。完成这些对象的构造后，训练器将执行一些额外的初始化，随后调用 `train` 方法进行训练。在训练过程中，每次读取数据时都可能对数据进行[预处理](./数据预处理.md)。